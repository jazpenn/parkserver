!function(e,t,a){var n={hasTouch:"ontouchstart"in window,bind:function(e,t){return function(){e.apply(t,arguments)}},inherits:function(e,t){var a=e.prototype,o=function(){};o.prototype=t.prototype;var n=e.prototype=new o;for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i]);e.prototype.constructor=e,e.superClass=t.prototype},throttle:function(t,a,o,n){var i,s,r,l,p,d=n||1e3,c=function(){s=p,i=null,o.apply(r,l),r=l=null};t.on(a,function(){r=this,l=arguments,p=(new Date).getTime(),s=s||p;var t=d-(p-s);0>=t?(e.clearTimeout(i),c()):i||(i=e.setTimeout(c,t))})},htmlEncode:function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;").replace(/ /g,"&nbsp;").replace(/=/g,"&#61;").replace(/`/g,"&#96;")},tmpl:function(e,t){var a=e;for(var o in t)t.hasOwnProperty(o)&&(a=a.replace(new RegExp("{"+o+"}","g"),this.htmlEncode(t[o]||"")));return a},supportCSS:function(t,a){for(var o,n,i=["Webkit","Moz","O","ms"],s=a||e.document.createElement("div"),r=t.slice(0,1).toUpperCase()+t.slice(1),l=(t+" "+i.join(r+" ")+r).split(" "),p=function(e,t){return void 0!==t.style[e]},d=0,c=l.length;c>d;d++)if(o=l[d],p(o,s)){n=o;break}return n}},i=t(window),s=function(e,t,i){if(!(this instanceof mejs.MediaElementPlayer))return new mejs.MediaElementPlayer(e,o);this._transformPrefix=n.supportCSS("transform");var s=["playpause","current","progress","duration","logo",mejs.MediaFeatures.hasTrueNativeFullScreen||mejs.MediaFeatures.hasSemiNativeFullScreen?"fullscreen":"",this._transformPrefix?"rotate":"","sharebtn","volume","toppanel","bottompanel","sharepanel","buttontips"];i=i||{},i.enableAutosize=!1,i.features=s,i.videoVolume="horizontal",i.alwaysShowControls=!0,i&&(i.showPanelTime=i.showPanelTime||1e4),this.data=t,a.call(this,e,i)};n.inherits(s,a),s.prototype.init=function(){var e=this;s.superClass.init.apply(e,arguments),e._updateSize(),e.changeSkin("wan-player"),n.throttle(i,"resize",function(){e._updateSize()})},s.prototype._updateSize=function(){var e=i.width(),t=i.height();this.setPlayerSize(e,t)},s.prototype._sendMessage=function(t,a){e.parent.postMessage("WAN_PLAYER::"+t+"::"+(a||""),"*")},s.prototype.buildrotate=function(e,a,o){{var n=this,i=0;t('<div class="mejs-button mejs-rotate-button"><button type="button" aria-controls="'+n.id+'" title="旋转视频" aria-label="旋转视频"></button></div>').appendTo(a).click(function(){i=(i+1)%4;var e,t=o.find(".mejs-poster");1===i||3===i?(n.$media.css({margin:"0 auto",position:"relative",display:"block"}),t.css({margin:"auto",right:0}),e=n.height):(n.media.style.cssText="",t.css({right:"auto"}),e="100%");var a="rotate("+90*i+"deg)",s={width:e};s[n._transformPrefix]=a,n.$media.css(s),t.css(s)})}},s.prototype.buildlogo=function(e,a){{var o=this;t('<div class="mejs-button mejs-logo"><a target="_blank" href="'+o.data.url+'" title="返回一起玩耍观看"></a></div>').appendTo(a)}},s.prototype.buildsharebtn=function(e,a,o,n){{var i=this;t('<div class="mejs-button mejs-share-button"><button type="button" aria-controls="'+i.id+'" title="分享" aria-label="分享"></button></div>').appendTo(a).click(function(){n.ended||(i.pause(),i.sharePanel.toggle())})}},s.prototype.buildsharepanel=function(e,a,o,i){if(e.isVideo){for(var s=this,r=s.data.moreVideos,l="",p='<li><a href="{url}" target="_blank"><img src="{img}" alt="{title}"/></a></li>',d=0,c=r.length;c>d;d++)l+=n.tmpl(p,r[d]);var u='<div class="mejs-overlay mejs-layer mejs-share-layer"><div class="mejs-share-container"><div class="mejs-share-t"><div class="mejs-share-l"><div class="mejs-share-url"><label>视频地址：</label><input type="text" value="{url}" /></div><div class="mejs-share-btns"><label>分享到：</label><div class="bdsharebuttonbox" data-tag="share_1"><a class="bds_tsina" data-cmd="tsina" href="###"></a><a class="bds_sqq" data-cmd="sqq" href="###"></a><a class="bds_qzone" data-cmd="qzone" href="###"></a></div></div></div><div class="mejs-share-r"><div class="mejs-share-app"><label>用手机看：</label><img src="{app_qrcode}" alt="二维码" /><div><span class="mejs-share-app-logo">一起玩耍</span><span class="mejs-share-app-desc">手游视频录制直播平台</span><a href="{app_download_url}" target="_blank">DOWNLOAD</a></div></div></div></div><div class="mejs-share-list"><ul>'+l+"</ul></div></div></div>";s.sharePanel=t(n.tmpl(u,s.data)).appendTo(o).hide(),i.addEventListener("ended",function(){s.showSharepanel()},!1),i.addEventListener("play",function(){s.hideSharepanel()},!1);var h=document.createElement("script");h.src="http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion="+~(-new Date/36e5),s.sharePanel[0].appendChild(h)}},s.prototype.showSharepanel=function(){this.sharePanel.show()},s.prototype.hideSharepanel=function(){this.sharePanel.hide()},s.prototype.doPeriodOnStartAndHover=function(e,t,a){var o=this,i=null,s=!1,r=function(){s=!0,t(),i||(i=setTimeout(p,e)),o.media.removeEventListener("play",r)},l=function(){s&&(t(),i&&clearTimeout(i),i=setTimeout(p,e))},p=function(){i&&clearTimeout(i),i=null,a()};o.media.addEventListener("play",r,!1),o.media.addEventListener("ended",p,!1);var d=n.hasTouch?"touchstart":"mouseenter";return o.container.on(d,l),function(){p(),o.container.off(d,l)}},s.prototype.buildtoppanel=function(e,a,o){if(e.isVideo){var i=this,s=n.tmpl('<div class="mejs-overlay mejs-layer mejs-top-layer"><div class="mejs-top-container"><img src="{author_img}" alt="" width="30" height="30"/><div><h2>{author_name}</h2><p>{time}</p></div><h1>{title}</h1></div></div>',i.data);i.topPanel=t(s).appendTo(o),i.hideToppanel=i.doPeriodOnStartAndHover(i.options.showPanelTime,function(){i.topPanel.show()},function(){i.topPanel.hide()})}},s.prototype.showToppanel=function(){this.topPanel.show()},s.prototype.buildbottompanel=function(e,a,o){if(e.isVideo){var i=this,s=i.data.bottomMessage||'本视频由超清手游录制软件一起玩耍APP录制播出 <a href="'+n.htmlEncode(i.data.app_download_url)+'" target="_blank">立即下载</a>',r='<div class="mejs-overlay mejs-layer mejs-bottom-layer"><div class="mejs-bottom-container"><p>'+s+'</p><a href="###" data-action="close" class="mejs-bottom-container-close"></a>';i.bottomPanel=t(r).appendTo(o).find('[data-action="close"]').click(function(){i.hideBottompanel()}).end(),i.hideBottompanel=i.doPeriodOnStartAndHover(i.options.showPanelTime,function(){i.bottomPanel.show()},function(){i.bottomPanel.hide()})}},s.prototype.showBottompanel=function(){this.bottomPanel.show()},s.prototype.buildbuttontips=function(e){if(e.isVideo){var a=function(e){var a=e.next();return a.length||(a=t('<span class="mejs-button-tip">'+e.attr("title")+"</span>").insertAfter(e)),a};t(".mejs-button button, .mejs-logo a").hover(function(){a(t(this)).show()},function(){a(t(this)).hide()})}},s.prototype.remove=function(){this.hideToppanel(),s.superClass.remove.call(this)},e.WanPlayer=s}(window,jQuery,MediaElementPlayer);